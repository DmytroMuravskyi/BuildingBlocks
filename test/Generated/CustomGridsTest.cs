
// This code was generated by Hypar.
// Edits to this code will be overwritten the next time you run 'hypar test generate'.
// DO NOT EDIT THIS FILE.

using Elements;
using Xunit;
using System.IO;
using System.Collections.Generic;
using Elements.Serialization.glTF;

namespace CustomGrids
{
    public class CustomGridsTest
    {
        [Fact]
        public void TestExecute()
        {
            var input = GetInput();

            var modelDependencies = new Dictionary<string, Model> { 
                {"Envelope", Model.FromJson(File.ReadAllText(@"/Users/serenali/Hypar Dropbox/Serena Li/Functions/CustomGrids/test/Generated/CustomGridsTest/model_dependencies/Envelope/model.json")) }, 
            };

            var result = CustomGrids.Execute(modelDependencies, input);
            result.Model.ToGlTF("../../../Generated/CustomGridsTest/results/CustomGridsTest.gltf", false);
            result.Model.ToGlTF("../../../Generated/CustomGridsTest/results/CustomGridsTest.glb");
            File.WriteAllText("../../../Generated/CustomGridsTest/results/CustomGridsTest.json", result.Model.ToJson());
        }

        public CustomGridsInputs GetInput()
        {
            var inputText = @"
            {
  ""Show Debug Geometry"": true,
  ""Grid Areas"": [
    {
      ""Orientation"": {
        ""Matrix"": {
          ""Components"": [
            0.9999947633971941,
            -0.009614940148020392,
            0,
            -10.992100150908389,
            -0.003236229007759388,
            -0.9999537753946179,
            0,
            17.971426034076142,
            0,
            0,
            1.0000000000000004,
            0
          ]
        }
      },
      ""U"": {
        ""Spacing"": [
          0.6,
          11.2,
          25.8,
          1.2
        ],
        ""Name"": ""{A}""
      },
      ""V"": {
        ""Spacing"": [
          1.2,
          7.2,
          7.2,
          7.2,
          7.2,
          7.2,
          7.2,
          7.2,
          1.2
        ],
        ""Name"": ""{1}""
      },
      ""Name"": ""Grid""
    }
  ],
  ""model_input_keys"": {
    ""Envelope"": ""bd950da8-7030-470e-81da-caca9d313608_0c8d0526-9490-4d53-896b-88a1515de583_elements.zip""
  }
}
            ";
            return Newtonsoft.Json.JsonConvert.DeserializeObject<CustomGridsInputs>(inputText);
        }
    }
}